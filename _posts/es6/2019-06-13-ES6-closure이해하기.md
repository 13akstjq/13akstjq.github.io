---
layout: post
title:  "[ES6] let을 이용해 closure해결하기 "
date:   2019-06-13 20:11:00
author: 한만섭
categories: es6
tags: es6 var let closure
---


> ## 시작하기전에... 
JavaScript코드를 작성할 때 for문을 돌면서 `tag`에 for문의 인덱스를 갖는 event를 만들으려고 했던 적이 있었다. 
그때 발생했던 이슈가 모든 event에 for문의 인덱스의 마지막 값이 들어있던 것이었다.  

대충 아래와 같은 코드였는데, 모든 리스트를 클릭해도 4번째 리스트라고 console에 나왔었다. 
```
for(var i = 0; i < list.length; i++){
  list[i].addEventListener("click",function(){
    console.log(i + "번째리스트닙니다.");
  });
}
```

> ## Why?
왜 이런 이슈가 발생하냐면 for문을 돌면서 eventlistener를 적용시키는 것이 아니라 그것은 for문이 다 돌고 난 후에 
적용되기 때문에 모두 4가 들어있는 것이다.  

그렇다면 인덱스를 기준으로 이벤트를 적용시키는 것이 불가능한가? **아니다**  

이럴 때 `let`을 사용하면 된다.  아래와 같이 작성하면 각기 다른 list에 다른 인덱스를 기준으로 이벤트를 적용시킬 수 있다. 

```
for(let i = 0; i < list.length; i++){
  list[i].addEventListener("click",function(){
    console.log(i + "번째리스트닙니다.");
  });
}
```
