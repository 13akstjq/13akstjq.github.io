---
layout: post
title:  "[AWS] Mac OS에서 ec2인스턴스에 접속하기 "
date:   2019-11-04-02:28:59
author: 한만섭
categories: aws
tags: AWS  
---

* TOC
{:toc}




![image](https://user-images.githubusercontent.com/46010705/68089166-67728f80-fea9-11e9-88fb-ac1b8ba232f1.png)



Mac 환경에서 aws를 사용하는 방법에 대해서 정리해보려고 합니다. 기존에 윈도우에서 aws ec2에 접속하는 것은 `xShell`을 사용해서 했었는데, mac은 리눅스 환경이기 때문에 자체 터미널에서 ssh(secure shell)를 사용해서 할 수 있습니다.  차근차근 정리해보도록 하겠습니다. 

### ec2 인스턴스 만들기 

![image](https://user-images.githubusercontent.com/46010705/68089625-2630ae80-feae-11e9-82ef-ccc20ffee068.png)

![image](https://user-images.githubusercontent.com/46010705/68089656-7b6cc000-feae-11e9-95b9-66da473f0213.png)

보안 그룹 구성은 위와같이 해주면 됩니다. 저는 백엔드와 프론트엔드를 동시에 배포해야하기 때문에 4000,8080을 열어주었습니다.  





### ec2 접속하기 

mac으로 aws ec2에 접속하는 방법은 [여기](https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html)에서 확인하실 수 있습니다. 저는 `mac connect aws`라는 키워드로검색을 해서 들어갔습니다.  

![image](https://user-images.githubusercontent.com/46010705/68089715-2f6e4b00-feaf-11e9-928d-c616760b1669.png)

위의 방법으로 접속할 수 있습니다. 저는 위의 방법을 그대로 따라했는데 `ssh permission denied publickey `에러가 발생했었습니다. 이유는 위의 사진을 보면 ec2-user라고 사용자 이름을 적으라고 나와있는데, 저는 ubuntu를 만들었기 때문에 user이름이 `ubuntu`였었습니다.  [인스턴스 기본 사용자 정보보기](https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/connection-prereqs.html#connection-prereqs-get-info-about-instance )

![image](https://user-images.githubusercontent.com/46010705/68089742-8b38d400-feaf-11e9-866c-3bc678ac2572.png)



```bash
ssh -i Desktop/key/itsme_key.pem ubuntu@[ip]
```

위처럼 작성해주면 접속이 가능해집니다. 





- root권한 부여하기 

  ```bash
  sudo su root
  ```

  

- Nodejs & npm install 

  ```bash
  sudo apt-get install nodejs
  sudo apt-get install npm 
  npm version
  ```

  

- 레퍼지토리 clone

  git을 설치하려고 했는데 이미 git이 설치가 되어있어서 바로 사용했습니다.  

  ```bash
  mkdir workspace
  cd workspace
  git clone [repository url]
  ```

- Yarn 설치 

  ```bash
  npm install yarn 
  npm install -g yarn 
  ```

- 프로젝트 이동 및 실행 

  ```bash
  cd [repository Name]
  yarn install 
  [start command]
  ```



***



### 발생한 이슈 

- ubuntu 인스턴스를 만들었으면 username은 `ubuntu` 였던 것.
- 카카오 API는 사용하는 URL마다 허용해줘야해서 에러 발생 
- 백엔드 배포했는데, 접속 안되는거 ec2 인바운드 허용 안해줘서 발생한 이슈 