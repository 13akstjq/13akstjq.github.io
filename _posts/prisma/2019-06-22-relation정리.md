---
layout: post
title:  "[prisma] relation 정리"
date:   2019-06-22-1:12:00
author: 한만섭
categories: prisma
tags: graphql prisma 
---


prisma에서는 `relation`이라는 개념이 있습니다. 강의를 들을 때 양방향이라는 얘기를 들었을 떄 와닿지 않았습니다. 근데 직접 사용해보니 확 와닿았습니다. 

인스타그램 같은 경우에 A B회원이 있을 때, A가 B를 팔로잉하게 되면 자동적으로 B의 팔로워에는 A가 있습니다. 어떤 회원이든지 팔로잉과 팔로워가 있습니다. 
그게 연결이 되어있는 경우에 relation 을 사용하는 것 같습니다.  

A가 B를 팔로잉한다는 쿼리를 날리게 되면 A의 정보중에 팔로잉에는 B가 들어가게 됩니다. 그럼 이 때 B에게 도 query가 가는 것입니다.  
B에게는 팔로잉과 relation 관계에 있던 팔로워로 query가 가게되고 결국 B에게는 A를 팔로워로 추가하게 되는 겁니다.  

이런 기능을 이용해 메세지에서도 적용할 수 있습니다. A가 B에게 메세지를 보내면 To는 A이지만 그 메세지를 받은 B에게는 from으로 등록이 되는 것입니다.  

